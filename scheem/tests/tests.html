<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link rel="stylesheet" href="tests_files/mocha.css">
  <script src="tests_files/jquery-1.js">
  </script>
  <script src="tests_files/chai.js">
  </script>
  <script src="tests_files/mocha.js">
  </script>
  <script src="tests_files/get_data.js">
  </script>
  <script>mocha.setup('tdd')</script>
  <script src="interpreter.js"></script>
  <script>
	var assert = chai.assert;

	$(function(){
			getData('tests.json', function(tests){
				tests.forEach(function(item){
					suite(item.suite, function(){
						item.tests.forEach(function(thisTest){
							
							// "Compile" the function, or it won't appear in the html :|
							var compiled = eval('(function(){assert.deepEqual( evalScheem(' + 
									JSON.stringify(thisTest.test) + ', ' + 
									JSON.stringify(thisTest.env)+') , ' + 
									JSON.stringify(thisTest.expected) + ' );})');
							//---

							test(thisTest.description, compiled);

						});
					});
				});

				mocha.run();
			});
	});
  </script>
  <script>

  </script>
</head>
<body>
	<div id="mocha"></div>
</body></html>
